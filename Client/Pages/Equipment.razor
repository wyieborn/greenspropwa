@page "/admin/equipment"
@using GreensProPWA.Shared.Entity
@inject HttpClient Http

<div class="max-w-6xl mx-auto px-4 py-6">
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-3xl font-semibold text-gray-800">Equipment List</h2>
        <NavLink href="/add-equipment" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow transition">
            ➕ Add Equipment
        </NavLink>
    </div>

    @if (equipmentList == null)
    {
        <p class="text-gray-500">Loading equipment...</p>
    }
    else if (!equipmentList.Any())
    {
        <p class="text-red-500">No equipment found.</p>
    }
    else
    {
        <div class="overflow-x-auto shadow-lg rounded-lg border border-gray-200">
            <table class="min-w-full bg-white">
                <thead class="bg-indigo-600 text-white">
                    <tr>
                        <th class="text-left px-4 py-2 font-medium">#</th>
                        <th class="text-left px-4 py-2 font-medium">Name</th>
                        <th class="text-left px-4 py-2 font-medium">Description</th>
                        <th class="text-left px-4 py-2 font-medium">Category</th>
                        <th class="text-left px-4 py-2 font-medium">Added On</th>
                    </tr>
                </thead>
                <tbody class="text-gray-700">
                    @foreach (var eq in equipmentList)
                    {
                        <tr class="hover:bg-gray-100 border-t border-gray-200">
                            <td class="px-4 py-2">@eq.Name</td>
                            <td class="px-4 py-2">@eq.Description</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>

@code {
    private List<EquipmentType> equipmentList;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            equipmentList = await Http.GetFromJsonAsync<List<EquipmentType>>("api/equipment");
        }
        catch (Exception ex)
        {
            Console.Error.WriteLine($"Error loading equipment: {ex.Message}");
            equipmentList = new List<EquipmentType>();
        }
    }


}
